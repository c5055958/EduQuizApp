{% extends "base.html" %}
{% block title %}Manage Quizzes{% endblock %}

{% block content %}
<style>
    body {
        background: linear-gradient(135deg, #667eea, #764ba2);
        min-height: 100vh;
    }
    .page-header {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: #fff;
        border-radius: 22px;
        padding: 28px 32px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        animation: fadeDown 0.8s ease;
    }
    .btn-animated {
        border-radius: 30px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.35s ease;
    }
    .btn-add-quiz {
        background: linear-gradient(135deg, #00c6ff, #0072ff);
        color: #fff;
        border: none;
        padding: 12px 30px;
        font-size: 15px;
        letter-spacing: 0.6px;
        box-shadow: 0 12px 25px rgba(0,114,255,0.45);
    }
    .btn-add-quiz:hover {
        background: linear-gradient(135deg, #0072ff, #00c6ff);
        transform: translateY(-3px) scale(1.08);
        box-shadow: 0 18px 35px rgba(0,114,255,0.6);
        color: #fff;
    }
    .table-card {
        border-radius: 22px;
        background: #ffffff;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        animation: fadeUp 0.8s ease;
    }
    .table-hover tbody tr {
        transition: background 0.3s ease, transform 0.3s ease;
        cursor: pointer;
    }
    .table-hover tbody tr:hover {
        background: #eef2ff;
        transform: scale(1.01);
    }
    .badge-active {
        background: linear-gradient(135deg, #28a745, #20c997);
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 12px;
    }
    .badge-draft {
        background: linear-gradient(135deg, #6c757d, #adb5bd);
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 12px;
    }
    .btn-add-questions {
        background: linear-gradient(135deg, #ffc107, #ff9800);
        color: #fff;
        border: none;
        padding: 7px 16px;
        border-radius: 30px;
        font-size: 12px;
        box-shadow: 0 6px 15px rgba(255,193,7,0.5);
        transition: all 0.3s ease;
    }
    .btn-add-questions:hover {
        transform: scale(1.12);
        box-shadow: 0 10px 22px rgba(255,193,7,0.7);
        color: #fff;
    }
    .btn-publish {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: #fff;
        border: none;
        padding: 7px 16px;
        border-radius: 30px;
        font-size: 12px;
        box-shadow: 0 6px 15px rgba(40,167,69,0.5);
        transition: all 0.3s ease;
    }
    .btn-publish:hover {
        transform: scale(1.12);
        box-shadow: 0 10px 22px rgba(40,167,69,0.7);
        color: #fff;
    }
    .btn-info {
        background: linear-gradient(135deg, #17a2b8, #138496);
        color: #fff;
        border: none;
        padding: 7px 16px;
        border-radius: 30px;
        font-size: 12px;
        box-shadow: 0 6px 15px rgba(23,162,184,0.5);
        transition: all 0.3s ease;
    }
    .btn-info:hover {
        transform: scale(1.12);
        box-shadow: 0 10px 22px rgba(23,162,184,0.7);
        color: #fff;
    }
    @keyframes fadeDown {
        from { opacity: 0; transform: translateY(-30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>

<div class="page-header mb-4 d-flex justify-content-between align-items-center">
    <h3 class="fw-bold mb-0 text-white">üìù Manage Quizzes</h3>
    <a href="{{ url_for('manage_modules') }}" class="btn btn-light btn-animated">‚¨Ö Back to Modules</a>
</div>

<div class="mb-3 text-center">
    <span class="badge bg-light text-dark fs-6 px-4 py-2 shadow-sm">
        üìò Module: <strong>{{ module.name }}</strong>
    </span>
</div>

<div class="mb-4">
    <a href="{{ url_for('add_quiz', module_id=module.id) }}" class="btn btn-add-quiz btn-animated">
        ‚ûï Add Quiz
    </a>
</div>

<div class="card table-card">
    <div class="card-body p-0">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr>
                    <th class="ps-4">Quiz Title</th>
                    <th>Status</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for q in quizzes %}
                <tr>
                    <td class="fw-semibold ps-4">{{ q.title }}</td>
                    <td>
                        {% if q.is_active %}
                            <span class="badge badge-active">Active</span>
                        {% else %}
                            <span class="badge badge-draft">Draft</span>
                        {% endif %}
                    </td>
                    <td class="text-center">
                        <a href="{{ url_for('add_questions', quiz_id=q.id) }}" class="btn btn-add-questions">
                            ‚ùì Add Questions
                        </a>

                        <a href="{{ url_for('view_quiz_questions', quiz_id=q.id) }}" class="btn btn-info ms-2">
                            üëÅ View Questions
                        </a>

                        {% if not q.is_active %}
                        <a href="{{ url_for('publish_quiz', quiz_id=q.id) }}" class="btn btn-publish ms-2">
                            üöÄ Publish
                        </a>
                        {% endif %}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3" class="text-center text-muted py-4">
                        No quizzes available.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}